<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Filter Bag Monitoring System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        .toast {
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        .fade-out {
            animation: fadeOut 0.3s ease-out forwards;
        }
        @keyframes fadeOut {
            to { opacity: 0; transform: translateX(100%); }
        }
        .warning-pulse {
            animation: warningPulse 2s infinite;
        }
        @keyframes warningPulse {
            0%, 100% { background-color: #fbbf24; }
            50% { background-color: #f59e0b; }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- Toast Container -->
    <div id="toastContainer" class="fixed top-4 right-4 z-50 space-y-2"></div>

    <div class="container mx-auto px-4 py-8 max-w-7xl">
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">Filter Bag Monitoring System</h1>
            <p class="text-gray-600">Sistem Monitoring Multi-Device Real-time</p>
        </header>

        <!-- Navigation -->
        <nav class="bg-white rounded-xl shadow-lg mb-8">
            <div class="flex flex-wrap justify-center">
                <button onclick="showSection('dashboard')" id="nav-dashboard" 
                        class="nav-btn px-6 py-3 font-semibold rounded-t-xl bg-blue-600 text-white">
                    üìä Dashboard
                </button>
                <button onclick="showSection('pemakaian')" id="nav-pemakaian" 
                        class="nav-btn px-6 py-3 font-semibold text-gray-600 hover:bg-gray-100">
                    üìù Input Pemakaian
                </button>
                <button onclick="showSection('penggantian')" id="nav-penggantian" 
                        class="nav-btn px-6 py-3 font-semibold text-gray-600 hover:bg-gray-100">
                    üîÑ Input Penggantian
                </button>
                <button onclick="showSection('musnah')" id="nav-musnah" 
                        class="nav-btn px-6 py-3 font-semibold text-gray-600 hover:bg-gray-100">
                    üóëÔ∏è Input Musnah
                </button>
                <button onclick="showSection('history')" id="nav-history" 
                        class="nav-btn px-6 py-3 font-semibold text-gray-600 hover:bg-gray-100 rounded-tr-xl">
                    üìã History
                </button>
            </div>
        </nav>

        <!-- Dashboard Section -->
        <div id="dashboard-section" class="section">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <!-- FBD Y 60 -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 text-center">FBD Y 60</h3>
                    <div class="space-y-4">
                        <div class="filter-status" data-mesin="FBD Y 60" data-tipe="warna">
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-medium">Filter Warna</span>
                                <span class="usage-count text-lg font-bold">0/300</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-3">
                                <div class="usage-bar bg-green-500 h-3 rounded-full transition-all duration-300" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="filter-status" data-mesin="FBD Y 60" data-tipe="putih">
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-medium">Filter Putih</span>
                                <span class="usage-count text-lg font-bold">0/300</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-3">
                                <div class="usage-bar bg-green-500 h-3 rounded-full transition-all duration-300" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- FBD Y 150 -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 text-center">FBD Y 150</h3>
                    <div class="space-y-4">
                        <div class="filter-status" data-mesin="FBD Y 150" data-tipe="warna">
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-medium">Filter Warna</span>
                                <span class="usage-count text-lg font-bold">0/300</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-3">
                                <div class="usage-bar bg-green-500 h-3 rounded-full transition-all duration-300" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="filter-status" data-mesin="FBD Y 150" data-tipe="putih">
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-medium">Filter Putih</span>
                                <span class="usage-count text-lg font-bold">0/300</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-3">
                                <div class="usage-bar bg-green-500 h-3 rounded-full transition-all duration-300" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- FBD Glatt -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 text-center">FBD Glatt</h3>
                    <div class="space-y-4">
                        <div class="filter-status" data-mesin="FBD Glatt" data-tipe="warna">
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-medium">Filter Warna</span>
                                <span class="usage-count text-lg font-bold">0/300</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-3">
                                <div class="usage-bar bg-green-500 h-3 rounded-full transition-all duration-300" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="filter-status" data-mesin="FBD Glatt" data-tipe="putih">
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-medium">Filter Putih</span>
                                <span class="usage-count text-lg font-bold">0/300</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-3">
                                <div class="usage-bar bg-green-500 h-3 rounded-full transition-all duration-300" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Input Pemakaian Section -->
        <div id="pemakaian-section" class="section hidden">
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h2 class="text-2xl font-semibold text-gray-800 mb-6">Input Pemakaian Filter</h2>
                <form id="pemakaianForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="pemakaian-operator" class="block text-sm font-medium text-gray-700 mb-2">Nama Operator</label>
                        <input type="text" id="pemakaian-operator" name="operator" required 
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label for="pemakaian-mesin" class="block text-sm font-medium text-gray-700 mb-2">Mesin</label>
                        <select id="pemakaian-mesin" name="mesin" required 
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">Pilih Mesin</option>
                            <option value="FBD Y 60">FBD Y 60</option>
                            <option value="FBD Y 150">FBD Y 150</option>
                            <option value="FBD Glatt">FBD Glatt</option>
                        </select>
                    </div>
                    <div>
                        <label for="pemakaian-tipe" class="block text-sm font-medium text-gray-700 mb-2">Tipe Filter</label>
                        <select id="pemakaian-tipe" name="tipe" required 
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">Pilih Tipe</option>
                            <option value="warna">Warna</option>
                            <option value="putih">Putih</option>
                        </select>
                    </div>
                    <div class="flex items-end">
                        <button type="submit" 
                                class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200">
                            üìù Catat Pemakaian
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Input Penggantian Section -->
        <div id="penggantian-section" class="section hidden">
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h2 class="text-2xl font-semibold text-gray-800 mb-6">Input Penggantian Filter</h2>
                <form id="penggantianForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="penggantian-operator" class="block text-sm font-medium text-gray-700 mb-2">Nama Operator</label>
                        <input type="text" id="penggantian-operator" name="operator" required 
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label for="penggantian-mesin" class="block text-sm font-medium text-gray-700 mb-2">Mesin</label>
                        <select id="penggantian-mesin" name="mesin" required 
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">Pilih Mesin</option>
                            <option value="FBD Y 60">FBD Y 60</option>
                            <option value="FBD Y 150">FBD Y 150</option>
                            <option value="FBD Glatt">FBD Glatt</option>
                        </select>
                    </div>
                    <div>
                        <label for="penggantian-tipe" class="block text-sm font-medium text-gray-700 mb-2">Tipe Filter</label>
                        <select id="penggantian-tipe" name="tipe" required 
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">Pilih Tipe</option>
                            <option value="warna">Warna</option>
                            <option value="putih">Putih</option>
                        </select>
                    </div>
                    <div>
                        <label for="penggantian-vendor" class="block text-sm font-medium text-gray-700 mb-2">Nama Vendor</label>
                        <input type="text" id="penggantian-vendor" name="vendor" required 
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div class="md:col-span-2">
                        <button type="submit" 
                                class="w-full md:w-auto bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200">
                            üîÑ Catat Penggantian
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Input Musnah Section -->
        <div id="musnah-section" class="section hidden">
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h2 class="text-2xl font-semibold text-gray-800 mb-6">Input Pemusnahan Filter</h2>
                <form id="musnahForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="musnah-operator" class="block text-sm font-medium text-gray-700 mb-2">Nama Operator</label>
                        <input type="text" id="musnah-operator" name="operator" required 
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label for="musnah-mesin" class="block text-sm font-medium text-gray-700 mb-2">Mesin</label>
                        <select id="musnah-mesin" name="mesin" required 
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">Pilih Mesin</option>
                            <option value="FBD Y 60">FBD Y 60</option>
                            <option value="FBD Y 150">FBD Y 150</option>
                            <option value="FBD Glatt">FBD Glatt</option>
                        </select>
                    </div>
                    <div>
                        <label for="musnah-tipe" class="block text-sm font-medium text-gray-700 mb-2">Tipe Filter</label>
                        <select id="musnah-tipe" name="tipe" required 
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">Pilih Tipe</option>
                            <option value="warna">Warna</option>
                            <option value="putih">Putih</option>
                        </select>
                    </div>
                    <div class="flex items-end">
                        <button type="submit" 
                                class="w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200">
                            üóëÔ∏è Catat Pemusnahan
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- History Section -->
        <div id="history-section" class="section hidden">
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h2 class="text-2xl font-semibold text-gray-800 mb-6">History Aktivitas</h2>
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Waktu</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Aktivitas</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Operator</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Mesin</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tipe Filter</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Detail</th>
                            </tr>
                        </thead>
                        <tbody id="historyTableBody" class="bg-white divide-y divide-gray-200">
                            <tr>
                                <td colspan="6" class="px-6 py-8 text-center text-gray-500">
                                    <div class="flex flex-col items-center">
                                        <div class="text-4xl mb-2">üìã</div>
                                        <div>Belum ada history aktivitas</div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        // Import Firebase modules
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, addDoc, onSnapshot, doc, setDoc, getDoc, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAInwF88wMhtqPebcj61HZzBFJX8vCyx8E",
            authDomain: "filterbagmonitoring.firebaseapp.com",
            projectId: "filterbagmonitoring",
            storageBucket: "filterbagmonitoring.firebasestorage.app",
            messagingSenderId: "705867194223",
            appId: "1:705867194223:web:9cd69e36a8eed96d0b929a",
            measurementId: "G-XRC6LVN6GH"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Global variables
        let filterData = {};
        let historyData = [];

        // Toast notification function
        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `toast px-6 py-3 rounded-lg text-white font-medium shadow-lg ${
                type === 'success' ? 'bg-green-500' : 
                type === 'error' ? 'bg-red-500' : 
                type === 'warning' ? 'bg-yellow-500' : 'bg-blue-500'
            }`;
            toast.textContent = message;
            
            document.getElementById('toastContainer').appendChild(toast);
            
            setTimeout(() => {
                toast.classList.add('fade-out');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // Navigation functions
        window.showSection = function(sectionName) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Show selected section
            document.getElementById(sectionName + '-section').classList.remove('hidden');
            
            // Update navigation buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.className = 'nav-btn px-6 py-3 font-semibold text-gray-600 hover:bg-gray-100';
            });
            
            const activeBtn = document.getElementById('nav-' + sectionName);
            activeBtn.className = 'nav-btn px-6 py-3 font-semibold rounded-t-xl bg-blue-600 text-white';
            
            if (sectionName === 'history') {
                renderHistory();
            }
        };

        // Update dashboard display
        function updateDashboard() {
            document.querySelectorAll('.filter-status').forEach(statusDiv => {
                const mesin = statusDiv.dataset.mesin;
                const tipe = statusDiv.dataset.tipe;
                const key = `${mesin}-${tipe}`;
                const usage = filterData[key] || 0;
                
                const usageCount = statusDiv.querySelector('.usage-count');
                const usageBar = statusDiv.querySelector('.usage-bar');
                
                usageCount.textContent = `${usage}/300`;
                
                const percentage = (usage / 300) * 100;
                usageBar.style.width = `${percentage}%`;
                
                // Color coding and warning
                if (usage >= 230) {
                    usageBar.className = 'usage-bar h-3 rounded-full transition-all duration-300 warning-pulse';
                    statusDiv.classList.add('bg-yellow-100', 'border-2', 'border-yellow-400', 'rounded-lg', 'p-3');
                    if (usage >= 230 && usage < 250) {
                        showToast(`‚ö†Ô∏è Filter ${tipe} ${mesin} mencapai ${usage} batch! Segera ganti!`, 'warning');
                    }
                } else if (usage >= 200) {
                    usageBar.className = 'usage-bar bg-yellow-500 h-3 rounded-full transition-all duration-300';
                    statusDiv.classList.remove('bg-yellow-100', 'border-2', 'border-yellow-400');
                } else {
                    usageBar.className = 'usage-bar bg-green-500 h-3 rounded-full transition-all duration-300';
                    statusDiv.classList.remove('bg-yellow-100', 'border-2', 'border-yellow-400');
                }
            });
        }

        // Add to history
        async function addToHistory(aktivitas, operator, mesin, tipe, detail = '') {
            try {
                await addDoc(collection(db, 'history'), {
                    aktivitas,
                    operator,
                    mesin,
                    tipe,
                    detail,
                    timestamp: serverTimestamp()
                });
            } catch (error) {
                console.error('Error adding to history: ', error);
            }
        }

        // Update filter usage
        async function updateFilterUsage(mesin, tipe, newValue) {
            const key = `${mesin}-${tipe}`;
            try {
                await setDoc(doc(db, 'filterUsage', key), {
                    mesin,
                    tipe,
                    usage: newValue,
                    lastUpdated: serverTimestamp()
                });
            } catch (error) {
                console.error('Error updating filter usage: ', error);
            }
        }

        // Render history table
        function renderHistory() {
            const tbody = document.getElementById('historyTableBody');
            
            if (historyData.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="6" class="px-6 py-8 text-center text-gray-500">
                            <div class="flex flex-col items-center">
                                <div class="text-4xl mb-2">üìã</div>
                                <div>Belum ada history aktivitas</div>
                            </div>
                        </td>
                    </tr>
                `;
                return;
            }

            const rows = historyData.map(item => {
                const aktivitasColor = {
                    'Pemakaian': 'bg-blue-100 text-blue-800',
                    'Penggantian': 'bg-green-100 text-green-800',
                    'Pemusnahan': 'bg-red-100 text-red-800'
                };

                return `
                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                            ${item.timestamp ? item.timestamp.toDate().toLocaleString('id-ID') : '-'}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full ${aktivitasColor[item.aktivitas] || 'bg-gray-100 text-gray-800'}">
                                ${item.aktivitas}
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${item.operator}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${item.mesin}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${item.tipe}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${item.detail || '-'}</td>
                    </tr>
                `;
            }).join('');

            tbody.innerHTML = rows;
        }

        // Form submissions
        document.getElementById('pemakaianForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(e.target);
            const operator = formData.get('operator');
            const mesin = formData.get('mesin');
            const tipe = formData.get('tipe');
            
            const key = `${mesin}-${tipe}`;
            const currentUsage = filterData[key] || 0;
            const newUsage = currentUsage + 1;
            
            await updateFilterUsage(mesin, tipe, newUsage);
            await addToHistory('Pemakaian', operator, mesin, tipe, `Batch ke-${newUsage}`);
            
            showToast(`Pemakaian filter ${tipe} ${mesin} berhasil dicatat!`);
            e.target.reset();
        });

        document.getElementById('penggantianForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(e.target);
            const operator = formData.get('operator');
            const mesin = formData.get('mesin');
            const tipe = formData.get('tipe');
            const vendor = formData.get('vendor');
            
            const key = `${mesin}-${tipe}`;
            const oldUsage = filterData[key] || 0;
            
            await updateFilterUsage(mesin, tipe, 0);
            await addToHistory('Penggantian', operator, mesin, tipe, `Vendor: ${vendor}, Usage sebelumnya: ${oldUsage} batch`);
            
            showToast(`Filter ${tipe} ${mesin} berhasil diganti! Counter direset.`);
            e.target.reset();
        });

        document.getElementById('musnahForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(e.target);
            const operator = formData.get('operator');
            const mesin = formData.get('mesin');
            const tipe = formData.get('tipe');
            
            const key = `${mesin}-${tipe}`;
            const currentUsage = filterData[key] || 0;
            
            await addToHistory('Pemusnahan', operator, mesin, tipe, `Usage saat dimusnahkan: ${currentUsage} batch`);
            
            showToast(`Pemusnahan filter ${tipe} ${mesin} berhasil dicatat!`);
            e.target.reset();
        });

        // Setup Firebase listeners
        function setupListeners() {
            // Listen to filter usage changes
            onSnapshot(collection(db, 'filterUsage'), (snapshot) => {
                filterData = {};
                snapshot.docs.forEach(doc => {
                    const data = doc.data();
                    const key = `${data.mesin}-${data.tipe}`;
                    filterData[key] = data.usage;
                });
                updateDashboard();
            });

            // Listen to history changes
            onSnapshot(collection(db, 'history'), (snapshot) => {
                historyData = snapshot.docs.map(doc => ({
                    id: doc.id,
                    ...doc.data()
                }));
                
                // Sort by timestamp (newest first)
                historyData.sort((a, b) => {
                    if (!a.timestamp) return 1;
                    if (!b.timestamp) return -1;
                    return b.timestamp.seconds - a.timestamp.seconds;
                });
            });
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', () => {
            setupListeners();
            showSection('dashboard');
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98fc8cadc320fe11',t:'MTc2MDY3MDA2Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
